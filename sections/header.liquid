<header class="grid items-center mx-auto header max-w-desktop">
	<div class="mx-auto my-2 header_logo" style="max-width: {{ section.settings.logo_width }}px;">
		{% if section.settings.logo != blank %}
			<a href="/" class="header_logo">
				{{ section.settings.logo | image_url: width: 400 | image_tag }}
			</a>
		{% else %}
			<a href="/" class="header_logo-title">
				{{ shop.name }}
			</a>
		{% endif %}
	</div>

	<nav class="flex header_menu" x-data>
		<p>Navigations</p>
		{% comment %}
			<button class="md:hidden" @click="$dispatch('toggle-menu')" type="button">
			  {% render 'icon-menu', class: 'w-10' %}
			</button>
			<ul class="hidden header__menu-nav md:flex">
			  {% for link in section.settings.menu.links %}
			    {% if link.links != blank %}
			      <li class="relative block px-4 py-5 nav__item">
			          <a href="{{ link.url }}">{{ link.title }}</a>
			          <ul class="nav__item-submenu absolute bg-white border py-3 px-4 min-w-[160px] top-16 left-1/2 transform -translate-x-1/2">
			            {% for sublink in linklists[link.handle].links %}
			              <li>
			                <a class="block py-1 hover:opacity-75 " href="{{ sublink.url }}">
			                  {{ sublink.title }}
			                </a>
			              </li>
			            {% endfor %}
			          </ul>
			      </li>
			    {% else %}
			      <li>
			        <a class="block px-4 py-5 nav__item" href="{{ link.url }}"> {{ link.title }}</a>
			      </li>
			    {% endif %}
			  {% endfor %}
			</ul>
		{% endcomment %}
	</nav>

	<div
		class="flex items-center justify-end space-x-5 header_icons"
		x-data="{ cart_count: {{ cart.item_count }} }"
		@cart-count-updated.window="cart_count = $event.detail"
	>
		<p>icons</p>
		{% comment %}
			{%- if shop.customer_accounts_enabled -%}
			  <div class="relative z-10 account-menu-wrapper">
			    <a href="{{ routes.account_url }}"
			      title="account link"
			      class="block text-center header__icon">
			      {% render 'icon-account', class: 'w-10 mx-auto' %}
			      <span class="sr-only">
			        {%- liquid
			          if customer
			            echo 'customer.account_fallback' | t
			          else
			            echo 'customer.account_fallback' | t
			          endif
			        -%}
			      </span>
			    </a>
			  </div>
			{%- endif -%}
			  <button
			    type="button"
			    title="Cart button"
			    @click="$dispatch('toggle-cart')"
			    class="relative text-center header__icon">
			      {% render 'icon-cart', class: 'w-10' %}
			      <span class="sr-only">{{ 'templates.cart.cart' | t }}</span>
			      <span x-text="cart_count" class="cart__count min-w-[22px] text-sm min-h-[22px] absolute grid place-content-center rounded-full -top-3 -right-1 text-white bg-black"> {{ cart.item_count }} </span>
			  </button>
		{% endcomment %}
	</div>
</header>

{% schema %}
	{
		"name": "Header",
		"tag": "section",
		"class": "section-header",
		"enabled_on": {
			"groups": ["header"]
		},
		"settings": [
			{
				"type": "image_picker",
				"id": "logo",
				"label": "Header Logo"
			},
			{
				"type": "range",
				"id": "logo_width",
				"min": 50,
				"max": 250,
				"step": 10,
				"default": 150,
				"unit": "px",
				"label": "Logo Width"
			},
			{
				"type": "link_list",
				"id": "menu",
				"default": "main-menu",
				"label": "Navigation Menu"
			},
			{
				"type": "checkbox",
				"id": "enable_sticky_header",
				"default": true,
				"label": "Enable sticky header",
				"info": "Header shows on the screen as customers scroll up."
			},
			{
				"type": "header",
				"content": "Spacing"
			},
			{
				"type": "range",
				"id": "margin_bottom",
				"min": 0,
				"max": 100,
				"step": 4,
				"unit": "px",
				"label": "Header Bottom Spacing",
				"default": 0
			}
		]
	}
{% endschema %}
